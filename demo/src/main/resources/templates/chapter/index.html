<!-- file: src/main/resources/templates/chapter/index.html -->
<link rel="stylesheet" th:href="@{/css/bootstrap.min.css}" />
<style>.img-thumb{width:56px;height:56px;object-fit:cover;border-radius:6px;background:#f1f3f5}</style>
</head>
<body class="bg-light">
<div class="container py-4">
  <header class="d-flex justify-content-between align-items-center mb-3">
    <h1 class="h3 m-0">Chapter</h1>
    <a class="btn btn-primary" th:href="@{/chapter/add}">+ Thêm chapter</a>
  </header>


  <div th:if="${msg}" class="alert alert-success alert-dismissible fade show" role="alert">
    <span th:text="${msg}">Thao tác thành công</span>
    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
  </div>
  <div th:if="${error}" class="alert alert-danger alert-dismissible fade show" role="alert">
    <span th:text="${error}">Có lỗi xảy ra</span>
    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
  </div>


  <div class="card shadow-sm">
    <div class="card-body p-0">
      <div class="table-responsive">
        <table class="table align-middle mb-0">
          <thead class="table-light">
          <tr>
            <th>#</th>
            <th>ID</th>
            <th>Ảnh</th>
            <th>Tên/Thứ tự</th>
            <th class="text-end">Thao tác</th>
          </tr>
          </thead>
          <tbody>
          <tr th:if="${chapters == null or #lists.isEmpty(chapters)}">
            <td colspan="5" class="text-center text-muted py-4">Chưa có dữ liệu</td>
          </tr>
          <tr th:each="c, it : ${chapters}">
            <td th:text="${it.index + 1}">1</td>
            <td th:text="${c.chapterId}">1</td>
            <td>
              <img class="img-thumb" th:if="${c.image}" th:src="@{'/Image/' + ${c.image}}" alt="thumb" />
              <span th:if="${c.image} == null" class="text-muted">—</span>
            </td>
            <td th:text="${c.tenChapter}">TenChapter</td>
            <td class="text-end">
              <div class="btn-group">
                <a class="btn btn-sm btn-outline-secondary" th:href="@{|/chapter/${c.chapterId}|}">Xem</a>
                <a class="btn btn-sm btn-outline-primary" th:href="@{|/chapter/edit/${c.chapterId}|}">Sửa</a>
                <form th:action="@{|/chapter/delete/${c.chapterId}|}" method="post" class="d-inline" onsubmit="return confirm('Xóa chapter này?');">
                  <input type="hidden" th:if="${_csrf}" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
                  <button class="btn btn-sm btn-outline-danger" type="submit">Xóa</button>
                </form>
              </div>
            </td>
          </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
<script th:src="@{/js/bootstrap.bundle.min.js}"></script>
</body>
</html>
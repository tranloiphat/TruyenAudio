<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="vi">
<head th:replace="_fragments :: head(${ 'Sửa Chapter ' + chapter.tenChapter })"></head>
<body>
<div th:replace="_fragments :: header"></div>

<div class="container">
  <div class="breadcrumbs"><a th:href="@{/chapter}">Chapter</a> › <b th:text="${'Sửa Chapter ' + chapter.tenChapter}">Sửa</b></div>

  <form th:action="@{/chapter/edit/{id}(id=${chapter.chapterId})}" th:object="${chapter}" method="post" enctype="multipart/form-data" class="form">
    <div class="row" style="flex-direction:column;gap:12px">
      <div class="row">
        <div style="flex:1">
          <label>Số thứ tự (TenChapter)</label>
          <input type="number" th:field="*{tenChapter}" required>
        </div>
        <div style="flex:1">
          <label>Bộ truyện</label>
          <select name="boTruyenId" class="select" required>
            <option th:each="bt : ${boTruyenList}" th:value="${bt.boTruyenId}"
                    th:selected="${chapter.boTruyen != null and bt.boTruyenId == chapter.boTruyen.boTruyenId}"
                    th:text="${bt.tenTruyen}">BT</option>
          </select>
        </div>
      </div>

      <div>
        <label>PDF hiện tại</label>
        <a th:if="${chapter.pdfFile != null}"
           th:href="@{/chapter/file/{f}(f=${chapter.pdfFile})}" target="_blank"
           th:text="${chapter.pdfFile}"></a>
        <span th:if="${chapter.pdfFile == null}" class="muted">Chưa có</span>
      </div>

      <div>
        <label>Thay PDF (tuỳ chọn)</label>
        <input type="file" name="pdfFile" accept="application/pdf">
        <div class="err" th:if="${#fields.hasErrors('pdfFile')}" th:errors="*{pdfFile}"></div>
      </div>

      <div class="row" style="gap:8px;margin-top:6px">
        <button type="submit" class="btn btn-primary">Cập nhật</button>
        <a class="btn" th:href="@{/chapter}">Huỷ</a>
      </div>
    </div>
  </form>
</div>

<div th:replace="_fragments :: footer"></div>
</body>
</html>

<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="vi">
<head th:replace="_fragments :: head('Thêm Chapter')"></head>
<body>
<div th:replace="_fragments :: header"></div>

<div class="container">
    <div class="breadcrumbs"><a th:href="@{/chapter}">Chapter</a> › <b>Thêm mới</b></div>

    <form th:action="@{/chapter/add}" th:object="${chapter}" method="post" enctype="multipart/form-data" class="form">
        <!-- CSRF nếu dùng:
        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}">
        -->
        <div class="row" style="flex-direction:column;gap:12px">
            <div>
                <label>Số thứ tự (TenChapter)</label>
                <input type="number" th:field="*{tenChapter}" required>
            </div>

            <!-- Ưu tiên select nếu có boTruyenList; nếu không sẽ là input id -->
            <div th:if="${boTruyenList != null}">
                <label>Bộ truyện</label>
                <select name="boTruyenId" class="select" required>
                    <option value="">-- Chọn bộ truyện --</option>
                    <option th:each="bt : ${boTruyenList}"
                            th:value="${bt.boTruyenId}"
                            th:text="${bt.tenTruyen}">BT</option>
                </select>
            </div>
            <div th:if="${boTruyenList == null}">
                <label>ID Bộ truyện</label>
                <input type="number" name="boTruyenId" placeholder="Nhập BoTruyenId" required>
            </div>

            <div>
                <label>File PDF</label>
                <input type="file" name="pdfFile" accept="application/pdf" required>
                <div class="err" th:if="${#fields.hasErrors('pdfFile')}" th:errors="*{pdfFile}"></div>
            </div>

            <div class="row" style="gap:8px;margin-top:6px">
                <button type="submit" class="btn btn-primary">Lưu</button>
                <a class="btn" th:href="@{/chapter}">Huỷ</a>
            </div>
        </div>
    </form>
</div>

<div th:replace="_fragments :: footer"></div>
</body>
</html>
